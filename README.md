# ğŸ“š BookVerse - Advanced Book Community Platform

> A modern, feature-rich book community platform that brings readers together. Built with cutting-edge technologies to provide seamless book discovery, social interactions, and AI-powered recommendations.

[![React](https://img.shields.io/badge/React-18.2.0-blue.svg)](https://reactjs.org/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.0.2-blue.svg)](https://www.typescriptlang.org/)
[![Supabase](https://img.shields.io/badge/Supabase-PostgreSQL-green.svg)](https://supabase.com/)
[![Vite](https://img.shields.io/badge/Vite-7.2.4-purple.svg)](https://vitejs.dev/)
[![Tailwind CSS](https://img.shields.io/badge/Tailwind-3.3.3-38bdf8.svg)](https://tailwindcss.com/)

## ğŸŒŸ Overview

BookVerse is a comprehensive book community platform that revolutionizes the way readers connect, discover, and share books. Whether you're looking to buy, sell, swap, or simply discuss your favorite reads, BookVerse provides all the tools you need in one beautiful, modern interface.

### âœ¨ Why BookVerse?

- **ğŸ“– Complete Book Management** - Manage your reading journey with favorites, reviews, and personalized recommendations
- **ğŸ¤ Vibrant Community** - Join book clubs, engage in discussions, and connect with fellow readers
- **ğŸ›’ Dynamic Marketplace** - Buy, sell, swap, or share books with transparent listings and easy transactions
- **ğŸ¤– AI-Powered Assistant** - Get intelligent book recommendations based on real inventory data
- **ğŸ¨ Modern Design** - Beautiful, responsive UI with smooth animations and dark mode support

---

## ğŸš€ Features

### ğŸ“š Book Management & Discovery

<details>
<summary><b>Click to expand</b></summary>

- **Advanced Search & Filtering**
  - Search by title, author, genre, or ISBN
  - Filter by availability, condition, and listing type
  - Sort by relevance, date, price, or popularity

- **Book Details**
  - Comprehensive book information with cover images
  - Author details and publication data
  - User reviews and ratings
  - Related recommendations

- **Personal Library**
  - Save favorites for quick access
  - Track reading progress
  - Set and monitor reading goals
  - View reading history and statistics

- **Reviews & Ratings**
  - Write detailed book reviews with photo uploads (up to 3 images)
  - Rate books on a 5-star scale
  - Read community reviews with sorting and filtering
  - Vote reviews as helpful/unhelpful
  - Verified purchase badges for transaction-based reviews

- **Book Discussions**
  - Start discussion topics for any book
  - Reply to ongoing discussions
  - Real-time threaded conversations
  - View discussion history and participants

- **Personal Wishlist**
  - Save favorite books for later
  - Visual grid display of saved books
  - Quick access from profile page
  - One-click navigation to book details

</details>

### ğŸ›’ Marketplace

<details>
<summary><b>Click to expand</b></summary>

- **Multiple Listing Types**
  - **Sale** - Buy and sell books with customizable pricing
  - **Swap** - Exchange books with other readers
  - **Borrow** - Lend or borrow books temporarily
  - **Share** - Give away books for free

- **Listing Features**
  - Upload multiple book cover images
  - Set condition (New, Like New, Good, Fair, Poor)
  - Add detailed descriptions
  - Set availability status
  - Real-time visibility in marketplace

- **Smart Filtering**
  - Filter by listing type
  - Sort by price, condition, date
  - Search within marketplace
  - View seller information

</details>

### ğŸ‘¥ Social & Community Features

<details>
<summary><b>Click to expand</b></summary>

- **Communities (Book Clubs)**
  - Create public or private communities
  - Customizable cover images and descriptions
  - Member management with roles (Owner, Admin, Moderator, Member)
  - Track member count and activity

- **Community Posts**
  - Share thoughts, reviews, and updates
  - Rich text formatting
  - Image attachments
  - Edit and delete your posts

- **Engagement Features**
  - Like posts and comments
  - Comment on community posts
  - Nested comment threads
  - Real-time comment counts

- **Notifications**
  - Real-time notification bell
  - Notifications for:
    - Community invites
    - Post likes and comments
    - New community members
    - Mentions and tags
  - Mark as read/unread
  - Navigate directly to related content

- **User Profiles**
  - Customizable avatars and bios
  - Reading statistics
  - Followers and following system
  - Activity feed

</details>

### ğŸ›¡ï¸ Trust & Credibility
<details>
<summary><b>Click to expand</b></summary>

- **Trust Score System**
  - **0-100 Point Scale**: Comprehensive scoring algorithm based on user behavior
  - **Scoring Logic**:
    - **Ratings (60%)**: Based on average star rating from other users
    - **Experience (20%)**: Based on number of completed transactions
    - **Activity (20%)**: Based on number of reviews received
  - **Trust Levels**:
    - ğŸ† **Trusted Expert** (80+ points)
    - ğŸŒŸ **Rising Star** (50-79 points)
    - âœ¨ **Active Member** (20-49 points)
    - ğŸŒ± **New Member** (0-19 points)

- **User Reputation**
  - **Profile Ratings**: Aggregate user rating displayed on profiles
  - **Transaction Reviews**: Review buyers/sellers after completed transactions
  - **Verified Badges**: Special verification status for trusted community members
  - **Review History**: Dedicated tab to view all received feedback

- **Trust & Safety**
  - **Reporting System**: Flag inappropriate content, users, or listings
  - **Moderation Queue**: Reports are stored for admin review
  - **Community Standards**: Tools to maintain a safe environment

- **Enhanced Book Reviews**
  - **Photo Attachments**: Upload up to 3 photos with book reviews
  - **Helpful Voting**: Vote "Helpful" or "Unhelpful" on community reviews
  - **Rich Media**: Lightbox view for review images
  - **Sorting**: Sort reviews by helpfulness, rating, or date

- **Secure Handover System**
  - **Unique Verification Codes**: Buyers receive a secure 6-digit code for local pickups
  - **Seller Verification**: Sellers must verify the code to complete the transaction
  - **Fraud Prevention**: Prevents premature "Mark as Sold" and ensures item receipt
  - **Status Tracking**: Dedicated "Pending Confirmation" status for ongoing handovers

</details>

### ğŸ“¬ Private Messaging
<details>
<summary><b>Click to expand</b></summary>

- **Direct Communication**
  - **User-to-User Chat**: Private messaging between buyers and sellers
  - **Contextual Start**: "Contact Seller" directly from book listings
  - **Real-time Updates**: Instant message delivery and status updates

- **Rich Messaging**
  - **Attachments**: Send images and documents (PDF, DOC)
  - **Read Receipts**: Know when your messages are delivered and read
  - **Notifications**: Unread message badges and alerts
  - **History**: Full conversation history with infinite scroll

</details>

### ğŸ’¬ AI-Powered Chatbot

<details>
<summary><b>Click to expand</b></summary>

- **Intelligent Assistant**
  - Access to real-time book and marketplace data
  - Context-aware responses
  - Multi-turn conversations
  - Conversation history

- **Key Capabilities**
  - Browse marketplace listings by type (sale, swap, borrow, share)
  - Search books by genre (fantasy, sci-fi, mystery, romance, etc.)
  - Get random book recommendations ("wildcard")
  - View current inventory statistics
  - Navigate directly to books and listings

- **Conversation Management**
  - Multiple conversation threads
  - Pin important conversations
  - Archive old chats
  - Conversation titles auto-generated from first message

- **Features**
  - Markdown support for rich formatting
  - Suggested quick-start questions
  - Clickable book links in responses
  - Smart categorization of queries

- **Example Queries**
  - "Show me fantasy books"
  - "What's for sale?"
  - "Browse marketplace"
  - "Surprise me with a random book"
  - "Show books available for swap"

</details>

### ğŸ¨ UI/UX Excellence

<details>
<summary><b>Click to expand</b></summary>

- **Modern Design System**
  - Built with shadcn/ui components
  - Radix UI primitives for accessibility
  - Consistent design tokens
  - Smooth animations with Framer Motion

- **Responsive Layout**
  - Mobile-first design
  - Tablet and desktop optimized
  - Adaptive navigation
  - Touch-friendly interactions

- **Dark Mode**
  - System preference detection
  - Manual toggle support
  - Persistent theme selection
  - Optimized for readability

- **Accessibility**
  - WCAG 2.1 compliant
  - Keyboard navigation
  - Screen reader support
  - High contrast mode

</details>

---

## ğŸ› ï¸ Technology Stack

### Frontend

| Technology | Version | Purpose |
|-----------|---------|---------|
| **React** | 18.2.0 | UI framework |
| **TypeScript** | 5.0.2 | Type safety |
| **Vite** | 7.2.4 | Build tool & dev server |
| **React Router** | 6.20.0 | Client-side routing |
| **Tailwind CSS** | 3.3.3 | Utility-first CSS |
| **Framer Motion** | 12.23.24 | Animations |
| **Radix UI** | Various | Accessible components |
| **Lucide React** | 0.294.0 | Icon library |
| **React Query** | 5.90.10 | Data fetching & caching |
| **React Hook Form** | Latest | Form management |
| **date-fns** | 4.1.0 | Date formatting |
| **Sonner** | 1.7.4 | Toast notifications |

### Backend & Services

| Technology | Purpose |
|-----------|---------|
| **Supabase** | Backend-as-a-Service |
| **PostgreSQL** | Database |
| **Row Level Security** | Data security |
| **Real-time Subscriptions** | Live updates |
| **Authentication** | User management |

### Development Tools

| Tool | Purpose |
|------|---------|
| **ESLint** | Code linting |
| **TypeScript ESLint** | TS-specific linting |
| **PostCSS** | CSS processing |
| **Autoprefixer** | CSS vendor prefixes |

---

## ğŸ“‹ Prerequisites

Before you begin, ensure you have the following installed:

- **Node.js** version 18 or higher ([Download](https://nodejs.org/))
- **npm** (comes with Node.js)
- **Git** ([Download](https://git-scm.com/))
- **Supabase Account** ([Sign up free](https://supabase.com/))

### Verify Installation

```bash
node --version  # Should be v18.x.x or higher
npm --version   # Should be 9.x.x or higher
git --version   # Should be 2.x.x or higher
```

---

## âš™ï¸ Installation & Setup

### Step 1: Clone the Repository

```bash
# Clone the repository
git clone <your-repo-url>
cd elevate-starter-hub-main

# Or download and extract the ZIP file
```

### Step 2: Install Dependencies

```bash
npm install --legacy-peer-deps
```

> **ğŸ’¡ Note**: The `--legacy-peer-deps` flag is used to handle peer dependency conflicts with some Radix UI packages. This is normal and expected.

**Alternative package managers:**
```bash
# Using Yarn
yarn install

# Using pnpm
pnpm install --shamefully-hoist
```

### Step 3: Environment Configuration

#### 3.1 Create Environment File

```bash
# Copy the example file
cp .env.example .env

# Or create manually
touch .env
```

#### 3.2 Set Up Supabase Project

1. **Go to [Supabase Dashboard](https://supabase.com/dashboard)**
2. **Create a new project** (or select existing)
   - Choose a project name
   - Set a database password (save this!)
   - Select a region close to your users
   - Click "Create new project"

3. **Get API Credentials**
   - Navigate to **Settings** â†’ **API**
   - Copy the **Project URL** (looks like `https://xxxxx.supabase.co`)
   - Copy the **anon public** key (under "Project API keys")

#### 3.3 Update .env File

```env
VITE_SUPABASE_URL=https://your-project-id.supabase.co
VITE_SUPABASE_PUBLISHABLE_KEY=your-anon-public-key-here
```

> **ğŸ”’ Security**: Never commit your `.env` file to version control. It's already in `.gitignore`.

### Step 4: Database Setup

#### Option A: Quick Setup (Recommended - 2 minutes)

1. **Open Supabase Dashboard**
   - Go to your project
   - Click **SQL Editor** in the left sidebar
   - Click **New Query**

2. **Run Migration**
   - Open `supabase/migrations/ALL_MIGRATIONS_COMBINED.sql` in your editor
   - Copy **ALL** contents (Ctrl+A, Ctrl+C)
   - Paste into Supabase SQL Editor
   - Click **Run** (or press Ctrl+Enter)
   - Wait for "Success. No rows returned" message
      
3. **Verify**
   - Go to **Table Editor**
   - You should see all tables listed (see Database Schema section below)

#### Option B: Individual Migrations

Run these files in order in the SQL Editor:

```sql
1. supabase/migrations/20251116170000_create_communities.sql
2. supabase/migrations/20251116180000_create_chat.sql
3. supabase/migrations/20251116190000_create_books.sql
4. supabase/migrations/20251123_trust_features.sql
5. supabase/migrations/20251123_create_messaging.sql
6. supabase/migrations/20251123_create_storage.sql
7. supabase/migrations/20251125_create_reports.sql
8. supabase/migrations/SECURE_TRUST_SCORE.sql
```

#### Option C: Using Supabase CLI (Advanced)

```bash
# Install Supabase CLI
npm install -g supabase

# Link to your project
supabase link --project-ref your-project-id

# Push migrations
supabase db push
```

### Step 5: Verify Database Setup

Go to **Table Editor** in Supabase and verify these tables exist:

**Communities Module:**
- âœ… `communities`
- âœ… `community_members`
- âœ… `community_posts`
- âœ… `community_post_likes`
- âœ… `community_post_comments`
- âœ… `community_invites`

**Chat Module:**
- âœ… `chat_conversations`
- âœ… `chat_messages`
- âœ… `chat_suggestions`

**Books Module:**
- âœ… `books`
- âœ… `book_listings`
- âœ… `book_favorites`
- âœ… `book_reviews`
- âœ… `book_review_votes` (helpful/unhelpful voting)
- âœ… `book_discussions`
- âœ… `book_discussion_replies`

**Trust & Transaction Module:**
- âœ… `transactions`
- âœ… `user_reviews`

**Messaging Module:**
- âœ… `conversations`
- âœ… `messages`

**Core Tables:**
- âœ… `profiles`
- âœ… `posts`
- âœ… `follows`
- âœ… `notifications`

### Step 6: Start Development Server

```bash
npm run dev
```

The application will start at: **http://localhost:8080**

ğŸ‰ **Congratulations!** You should now see the BookVerse home page.

---

## ğŸ“ Project Structure

```
elevate-starter-hub-main/
â”‚
â”œâ”€â”€ ğŸ“‚ src/                          # Source code
â”‚   â”œâ”€â”€ ğŸ“‚ components/               # React components
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ ui/                   # shadcn/ui components
â”‚   â”‚   â”‚   â”œâ”€â”€ button.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ card.tsx
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ layout/               # Layout components
â”‚   â”‚   â”‚   â”œâ”€â”€ Navigation.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ NotificationBell.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ PageTransition.tsx
â”‚   â”‚   â”‚   â””â”€â”€ ErrorBoundary.tsx
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ chat/                 # Chat components
â”‚   â”‚   â”‚   â”œâ”€â”€ ChatSidebar.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ChatMessages.tsx
â”‚   â”‚   â”‚   â””â”€â”€ SuggestedQuestions.tsx
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ community/            # Community components
â”‚   â”‚   â”‚   â”œâ”€â”€ CommunityCard.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ CreateCommunityDialog.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ InviteDialog.tsx
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ market/               # Marketplace components
â”‚   â”‚   â”‚   â”œâ”€â”€ MarkAsSoldDialog.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ UserReviewDialog.tsx
â”‚   â”‚   â”‚   â””â”€â”€ VerifyTransactionDialog.tsx
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ moderation/           # Moderation components
â”‚   â”‚   â”‚   â”œâ”€â”€ ReportDialog.tsx
â”‚   â”‚   â”‚   â””â”€â”€ ModerationTools.tsx
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ AddBook/              # Add book form steps
â”‚   â”‚   â”‚   â”œâ”€â”€ ...
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ discussion/           # Discussion components
â”‚   â”‚   â”‚   â””â”€â”€ BookDiscussionBoard.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ pages/                    # Page components
â”‚   â”‚   â”œâ”€â”€ Home.tsx                 # Landing page
â”‚   â”‚   â”œâ”€â”€ Books.tsx                # Book browsing
â”‚   â”‚   â”œâ”€â”€ BookDetail.tsx           # Individual book page
â”‚   â”‚   â”œâ”€â”€ Marketplace.tsx          # Marketplace listings
â”‚   â”‚   â”œâ”€â”€ Community.tsx            # Communities list
â”‚   â”‚   â”œâ”€â”€ CommunityDetail.tsx      # Single community
â”‚   â”‚   â”œâ”€â”€ Chat.tsx                 # AI chatbot
â”‚   â”‚   â”œâ”€â”€ Profile.tsx              # User profile
â”‚   â”‚   â”œâ”€â”€ Messages.tsx             # Private messaging
â”‚   â”‚   â”œâ”€â”€ AddBook.tsx              # Add book form
â”‚   â”‚   â”œâ”€â”€ Discover.tsx             # Discover users
â”‚   â”‚   â”œâ”€â”€ Auth.tsx                 # Login/signup
â”‚   â”‚   â””â”€â”€ NotFound.tsx             # 404 page
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ contexts/                 # React contexts
â”‚   â”‚   â””â”€â”€ AuthContext.tsx          # Authentication state
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ integrations/             # External services
â”‚   â”‚   â””â”€â”€ ğŸ“‚ supabase/
â”‚   â”‚       â”œâ”€â”€ client.ts            # Supabase client
â”‚   â”‚       â”œâ”€â”€ types.ts             # Database types
â”‚   â”‚       â””â”€â”€ hooks/               # Supabase hooks
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ services/                 # Business logic
â”‚   â”‚   â””â”€â”€ aiService.ts             # AI chatbot logic
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ hooks/                    # Custom React hooks
â”‚   â”‚   â”œâ”€â”€ use-toast.ts
â”‚   â”‚   â”œâ”€â”€ use-mobile.tsx
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ utils/                    # Utility functions
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ lib/                      # Library configurations
â”‚   â”‚   â””â”€â”€ utils.ts                 # Helper utilities
â”‚   â”‚
â”‚   â”œâ”€â”€ App.tsx                      # Root component
â”‚   â”œâ”€â”€ main.tsx                     # Entry point
â”‚   â””â”€â”€ index.css                    # Global styles
â”‚
â”œâ”€â”€ ğŸ“‚ supabase/                     # Database files
â”‚   â””â”€â”€ ğŸ“‚ migrations/               # SQL migrations
â”‚       â”œâ”€â”€ ALL_MIGRATIONS_COMBINED.sql
â”‚       â”œâ”€â”€ 20251116170000_create_communities.sql
â”‚       â”œâ”€â”€ 20251116180000_create_chat.sql
â”‚       â”œâ”€â”€ 20251116190000_create_books.sql
â”‚       â”œâ”€â”€ DISABLE_RLS.sql          # (For testing only)
â”‚       â””â”€â”€ ...
â”‚
â”œâ”€â”€ ğŸ“‚ public/                       # Static assets
â”‚   â”œâ”€â”€ favicon.ico
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ ğŸ“„ .env                          # Environment variables (create this)
â”œâ”€â”€ ğŸ“„ .env.example                  # Environment template
â”œâ”€â”€ ğŸ“„ .gitignore                    # Git ignore rules
â”œâ”€â”€ ğŸ“„ package.json                  # Dependencies
â”œâ”€â”€ ğŸ“„ tsconfig.json                 # TypeScript config
â”œâ”€â”€ ğŸ“„ tailwind.config.ts            # Tailwind config
â”œâ”€â”€ ğŸ“„ vite.config.ts                # Vite config
â”œâ”€â”€ ğŸ“„ components.json               # shadcn/ui config
â”‚
â””â”€â”€ ğŸ“„ README.md                     # This file
```

---

## ğŸ—ºï¸ Application Routes

| Route | Page | Description |
|-------|------|-------------|
| `/` | Home | Landing page with features and statistics |
| `/books` | Books | Browse all books in the library |
| `/book/:id` | Book Detail | Individual book details with reviews |
| `/marketplace` | Marketplace | Browse listings (sale, swap, borrow, share) |
| `/add-book` | Add Book | Multi-step form to add new book listing |
| `/community` | Communities | Browse and join book communities |
| `/community/:id` | Community Detail | View community posts and members |
| `/community/:id/post/:postId` | Community Post | View community-specific post with comments |
| `/post/:id` | Post Detail | View standalone post details |
| `/messages` | Messages | Private conversations with other users |
| `/messages/:conversationId` | Conversation | Direct link to a specific conversation |
| `/chat` | AI Chat | Interact with AI assistant |
| `/discover` | Discover | Find new users and books |
| `/profile` | Profile | View and edit your profile |
| `/auth` | Auth | Login and signup |
| `*` | Not Found | 404 error page |

---

## ğŸ’¾ Database Schema

### Core Tables

#### `profiles`
User profile information
```sql
- id (UUID, PK) - User ID from auth.users
- username (TEXT)
- full_name (TEXT)
- avatar_url (TEXT)
- bio (TEXT)
- created_at (TIMESTAMPTZ)
- updated_at (TIMESTAMPTZ)
```

#### `books`
Book catalog
```sql
- id (UUID, PK)
- title (TEXT) - Book title
- author (TEXT) - Author name
- isbn (TEXT) - ISBN number
- genre (TEXT) - Book genre
- description (TEXT) - Book description
- cover_image_url (TEXT) - Cover image URL
- published_date (DATE)
- created_at (TIMESTAMPTZ)
- user_id (UUID) - User who added the book
```

#### `book_listings`
Marketplace listings
```sql
- id (UUID, PK)
- book_id (UUID, FK â†’ books)
- user_id (UUID, FK â†’ auth.users)
- listing_type (TEXT) - 'sale', 'swap', 'borrow', 'share'
- price (DECIMAL) - Price for sale listings
- condition (TEXT) - 'new', 'like_new', 'good', 'fair', 'poor'
- description (TEXT)
- is_available (BOOLEAN)
- created_at (TIMESTAMPTZ)
- updated_at (TIMESTAMPTZ)
```

#### `book_favorites`
User's favorite books
```sql
- id (UUID, PK)
- user_id (UUID, FK â†’ auth.users)
- book_id (UUID, FK â†’ books)
- created_at (TIMESTAMPTZ)
- UNIQUE(user_id, book_id)
```

#### `book_reviews`
Book reviews and ratings
```sql
- id (UUID, PK)
- book_id (UUID, FK â†’ books)
- user_id (UUID, FK â†’ auth.users)
- rating (INTEGER) - 1-5 stars
- review_text (TEXT)
- created_at (TIMESTAMPTZ)
- updated_at (TIMESTAMPTZ)
```

### Community Tables

#### `communities`
Book clubs and communities
```sql
- id (UUID, PK)
- name (TEXT)
- description (TEXT)
- cover_image_url (TEXT)
- avatar_url (TEXT)
- is_public (BOOLEAN)
- created_by (UUID, FK â†’ auth.users)
- member_count (INTEGER)
- post_count (INTEGER)
- created_at (TIMESTAMPTZ)
- updated_at (TIMESTAMPTZ)
```

#### `community_members`
Community membership
```sql
- id (UUID, PK)
- community_id (UUID, FK â†’ communities)
- user_id (UUID, FK â†’ auth.users)
- role (TEXT) - 'owner', 'admin', 'moderator', 'member'
- joined_at (TIMESTAMPTZ)
- UNIQUE(community_id, user_id)
```

#### `community_posts`
Posts within communities
```sql
- id (UUID, PK)
- community_id (UUID, FK â†’ communities)
- user_id (UUID, FK â†’ auth.users)
- content (TEXT)
- image_url (TEXT)
- like_count (INTEGER)
- comment_count (INTEGER)
- created_at (TIMESTAMPTZ)
- updated_at (TIMESTAMPTZ)
```

#### `community_post_likes`
Post likes
```sql
- id (UUID, PK)
- post_id (UUID, FK â†’ community_posts)
- user_id (UUID, FK â†’ auth.users)
- created_at (TIMESTAMPTZ)
- UNIQUE(post_id, user_id)
```

#### `community_post_comments`
Post comments
```sql
- id (UUID, PK)
- post_id (UUID, FK â†’ community_posts)
- user_id (UUID, FK â†’ auth.users)
- content (TEXT)
- created_at (TIMESTAMPTZ)
- updated_at (TIMESTAMPTZ)
```

### Chat Tables

#### `chat_conversations`
Chat conversation threads
```sql
- id (UUID, PK)
- user_id (UUID, FK â†’ auth.users)
- title (TEXT)
- message_count (INTEGER)
- is_pinned (BOOLEAN)
- is_archived (BOOLEAN)
- metadata (JSONB)
- created_at (TIMESTAMPTZ)
- updated_at (TIMESTAMPTZ)
```

#### `chat_messages`
Individual chat messages
```sql
- id (UUID, PK)
- conversation_id (UUID, FK â†’ chat_conversations)
- user_id (UUID, FK â†’ auth.users)
- content (TEXT)
- role (TEXT) - 'user', 'assistant', 'system'
- is_bot (BOOLEAN)
- metadata (JSONB)
- created_at (TIMESTAMPTZ)
```

#### `chat_suggestions`
Suggested chat questions
```sql
- id (UUID, PK)
- user_id (UUID, FK â†’ auth.users)
- conversation_id (UUID, FK â†’ chat_conversations)
- question (TEXT)
- category (TEXT)
- is_preset (BOOLEAN)
- created_at (TIMESTAMPTZ)
```

### Trust & Transaction Tables

#### `transactions`
Records of book exchanges
```sql
- id (UUID, PK)
- buyer_id (UUID, FK â†’ auth.users)
- seller_id (UUID, FK â†’ auth.users)
- listing_id (UUID, FK â†’ book_listings)
- status (TEXT) - 'pending', 'completed', 'cancelled'
- created_at (TIMESTAMPTZ)
- updated_at (TIMESTAMPTZ)
```

#### `user_reviews`
Reviews for users (reputation)
```sql
- id (UUID, PK)
- reviewer_id (UUID, FK â†’ auth.users)
- reviewed_user_id (UUID, FK â†’ auth.users)
- transaction_id (UUID, FK â†’ transactions)
- rating (INTEGER) - 1-5 stars
- comment (TEXT)
- created_at (TIMESTAMPTZ)
```

#### `user_trust_scores`
Calculated trust scores for users (Secure Table)
```sql
- user_id (UUID, PK, FK â†’ profiles)
- trust_score (DECIMAL) - 0-100 score
- is_verified (BOOLEAN)
- total_transactions (INTEGER)
- last_calculated_at (TIMESTAMPTZ)
```

#### `book_review_votes`
Helpfulness votes on book reviews
```sql
- id (UUID, PK)
- review_id (UUID, FK â†’ book_reviews)
- user_id (UUID, FK â†’ auth.users)
- vote_type (TEXT) - 'helpful', 'unhelpful'
- created_at (TIMESTAMPTZ)
- UNIQUE(review_id, user_id)
```

#### `reports`
User reports for moderation
```sql
- id (UUID, PK)
- reporter_id (UUID, FK â†’ auth.users)
- reported_user_id (UUID, FK â†’ auth.users, nullable)
- listing_id (UUID, FK â†’ book_listings, nullable)
- reason (TEXT) - 'spam', 'inappropriate', 'scam', 'other'
- details (TEXT)
- status (TEXT) - 'pending', 'resolved', 'dismissed'
- created_at (TIMESTAMPTZ)
```

### Messaging Tables

#### `conversations`
Chat threads between users
```sql
- id (UUID, PK)
- participant_1_id (UUID, FK â†’ auth.users)
- participant_2_id (UUID, FK â†’ auth.users)
- last_message_at (TIMESTAMPTZ)
- last_message_preview (TEXT)
- created_at (TIMESTAMPTZ)
- updated_at (TIMESTAMPTZ)
```

#### `messages`
Individual private messages
```sql
- id (UUID, PK)
- conversation_id (UUID, FK â†’ conversations)
- sender_id (UUID, FK â†’ auth.users)
- content (TEXT)
- attachment_url (TEXT)
- attachment_type (TEXT)
- is_read (BOOLEAN)
- read_at (TIMESTAMPTZ)
- created_at (TIMESTAMPTZ)
```

### Notification Tables

#### `notifications`
User notifications
```sql
- id (UUID, PK)
- user_id (UUID, FK â†’ auth.users)
- type (TEXT) - notification type
- title (TEXT)
- message (TEXT)
- link (TEXT)
- is_read (BOOLEAN)
- created_at (TIMESTAMPTZ)
- related_community_id (UUID, nullable)
- related_post_id (UUID, nullable)
- related_user_id (UUID, nullable)
```

### Database Features

- **Row Level Security (RLS)**: All tables have RLS enabled for data protection
- **Automatic Triggers**: Update counts automatically (members, posts, likes, comments)
- **Indexes**: Optimized queries with strategic indexes
- **Cascading Deletes**: Proper cleanup when related records are deleted
- **Notification Triggers**: Auto-create notifications on likes/comments

---

## ğŸ”§ Configuration

### Vite Configuration

Located in `vite.config.ts`:

```typescript
export default defineConfig({
  plugins: [react()],
  server: {
    port: 8080,       // Development server port
    host: true,       // Listen on all addresses
  },
  build: {
    outDir: 'dist',   // Production build directory
  },
})
```

**Change port:**
```typescript
server: {
  port: 3000,  // Your preferred port
}
```

### Tailwind Configuration

Located in `tailwind.config.ts`:

```typescript
// Includes custom colors, animations, and theme extensions
// Supports dark mode with class-based strategy
```

### TypeScript Configuration

Located in `tsconfig.json`:

```json
{
  "compilerOptions": {
    "target": "ES2020",
    "module": "ESNext",
    "lib": ["ES2020", "DOM", "DOM.Iterable"],
    "strict": true,
    "jsx": "react-jsx"
  }
}
```

### Environment Variables

All environment variables must be prefixed with `VITE_` to be accessible in the client:

```env
# Required
VITE_SUPABASE_URL=your-supabase-url
VITE_SUPABASE_PUBLISHABLE_KEY=your-supabase-anon-key

# Optional (for AI features)
VITE_OPENAI_API_KEY=your-openai-key
VITE_ANTHROPIC_API_KEY=your-anthropic-key
```

---

## ğŸ¤– AI Chatbot Details

The AI chatbot (`src/services/aiService.ts`) provides intelligent responses using:

### Current Implementation (Keyword-Based)

- **No API keys required**
- **Real-time data access** to books and marketplace
- **Pattern matching** for common queries
- **Context-aware** responses

### Supported Query Types

1. **Greetings** - Shows database statistics
2. **Marketplace Browsing** - Filter by sale/swap/borrow/share
3. **Genre Search** - Find books by genre
4. **Random Recommendations** - "Wildcard" feature
5. **Community Help** - Guide to features
6. **Reading Goals** - Track progress

### Upgrade to OpenAI/Anthropic

To use advanced AI:

1. **Add API key to `.env`:**
```env
VITE_OPENAI_API_KEY=sk-...
```

2. **Update `src/services/aiService.ts`:**
```typescript
import OpenAI from 'openai';

const openai = new OpenAI({
  apiKey: import.meta.env.VITE_OPENAI_API_KEY,
  dangerouslyAllowBrowser: true // For client-side
});

export async function generateAIResponse(context: MessageContext) {
  const response = await openai.chat.completions.create({
    model: "gpt-3.5-turbo",
    messages: [
      { role: "system", content: "You are a helpful book assistant..." },
      ...context.conversationHistory,
      { role: "user", content: context.userMessage }
    ],
  });
  
  return {
    content: response.choices[0].message.content,
    suggestedActions: []
  };
}
```

---

## ğŸš€ Deployment

### Build for Production

```bash
# Create optimized production build
npm run build

# Preview production build locally
npm run preview
```

The build output will be in the `dist/` folder.

### Deploy to Vercel

1. **Install Vercel CLI** (optional)
```bash
npm install -g vercel
```

2. **Deploy**
```bash
# First deployment
vercel

# Production deployment
vercel --prod
```

3. **Or use Vercel Dashboard**
   - Connect your GitHub repository
   - Add environment variables in project settings
   - Deploy automatically on push

### Deploy to Netlify

1. **Install Netlify CLI** (optional)
```bash
npm install -g netlify-cli
```

2. **Deploy**
```bash
# First deployment
netlify deploy

# Production deployment
netlify deploy --prod
```

3. **Or use Netlify Dashboard**
   - Drag and drop `dist/` folder
   - Or connect GitHub repository

### Environment Variables for Production

Add these in your hosting platform:

```env
VITE_SUPABASE_URL=https://xxxxx.supabase.co
VITE_SUPABASE_PUBLISHABLE_KEY=your-anon-key
```

### Build Settings

| Platform | Build Command | Publish Directory |
|----------|--------------|-------------------|
| Vercel | `npm run build` | `dist` |
| Netlify | `npm run build` | `dist` |
| GitHub Pages | `npm run build` | `dist` |

---

## ğŸ› Troubleshooting

### Common Issues

<details>
<summary><b>Database Connection Errors</b></summary>

**Symptoms:**
- "Failed to fetch"
- "Invalid API key"
- Empty data on pages

**Solutions:**
1. Verify `.env` file exists and has correct values
2. Check Supabase project is active (not paused)
3. Ensure environment variables are properly prefixed with `VITE_`
4. Restart development server after changing `.env`
5. Check browser console for specific errors

</details>

<details>
<summary><b>Build Errors</b></summary>

**Peer dependency conflicts:**
```bash
npm install --legacy-peer-deps
```

**Clear cache and reinstall:**
```bash
rm -rf node_modules package-lock.json
npm install --legacy-peer-deps
```

**TypeScript errors:**
```bash
# Check TypeScript version
npm list typescript

# Update if needed
npm install typescript@latest --save-dev
```

</details>

<details>
<summary><b>Port Already in Use</b></summary>

**Error:** `Port 8080 is already in use`

**Solutions:**

1. **Kill the process** (Windows PowerShell):
```powershell
Get-Process -Id (Get-NetTCPConnection -LocalPort 8080).OwningProcess | Stop-Process
```

2. **Change port** in `vite.config.ts`:
```typescript
server: {
  port: 3000
}
```

</details>

<details>
<summary><b>Blank Pages / "Failed to load posts"</b></summary>

**Cause:** Missing database tables

**Solution:**
1. Go to Supabase â†’ SQL Editor
2. Run `ALL_MIGRATIONS_COMBINED.sql`
3. Verify all tables exist in Table Editor
4. Check browser console for specific errors

</details>

<details>
<summary><b>Images Not Uploading</b></summary>

**For book cover images:**

1. **Enable Supabase Storage:**
   - Go to Supabase Dashboard â†’ Storage
   - Create bucket named `book-covers`
   - Set as public bucket

2. **Update upload code** in `src/pages/AddBook.tsx`:
```typescript
const { data, error } = await supabase.storage
  .from('book-covers')
  .upload(`${userId}/${file.name}`, file);
```

</details>

<details>
<summary><b>TypeScript Errors in IDE</b></summary>

**"Cannot find module" errors:**

1. Restart TypeScript server (VS Code):
   - `Ctrl+Shift+P` â†’ "TypeScript: Restart TS Server"

2. Regenerate types:
```bash
npm run build
```

</details>

### Debug Mode

Enable detailed logging:

```typescript
// In src/integrations/supabase/client.ts
const supabase = createClient(supabaseUrl, supabaseKey, {
  auth: {
    debug: true  // Add this line
  }
});
```

---

## ğŸ“š Additional Documentation

| File | Description |
|------|-------------|
| `TRUST_FEATURES_GUIDE.md` | Trust & credibility features documentation |
| `MESSAGING_GUIDE.md` | Private messaging system guide |
| `PROJECT_CONCEPTS_GUIDE.md` | Technical concepts and architecture guide |

---

## ğŸ›¡ï¸ Security Best Practices

### Environment Variables
- âœ… Never commit `.env` file
- âœ… Use different keys for dev/staging/production
- âœ… Rotate keys periodically
- âŒ Don't expose API keys in client-side code

### Row Level Security (RLS)
All tables have RLS policies to ensure:
- Users can only see their own data
- Community members can only see community content
- Public data is accessible to everyone
- Admins have appropriate permissions

### Authentication
- Handled by Supabase Auth
- Supports email/password
- Email confirmation required
- Password reset flow
- JWT tokens with automatic refresh

### Data Validation
- TypeScript for type safety
- Zod for runtime validation
- SQL constraints in database
- Form validation on client and server

---

## ğŸ¯ NPM Scripts

| Command | Description |
|---------|-------------|
| `npm run dev` | Start development server |
| `npm run build` | Build for production |
| `npm run preview` | Preview production build |
| `npm run lint` | Run ESLint |

---

## ğŸ¤ Contributing

We welcome contributions! Here's how:

### Getting Started

1. **Fork the repository**
2. **Clone your fork**
```bash
git clone https://github.com/your-username/bookverse.git
```

3. **Create a feature branch**
```bash
git checkout -b feature/amazing-feature
```

4. **Make your changes**
   - Write clean, documented code
   - Follow existing code style
   - Add tests if applicable

5. **Commit your changes**
```bash
git commit -m "Add amazing feature"
```

6. **Push to your fork**
```bash
git push origin feature/amazing-feature
```

7. **Open a Pull Request**

### Coding Guidelines

- Use TypeScript for type safety
- Follow React best practices
- Write meaningful commit messages
- Update documentation for new features
- Test your changes thoroughly

---

## ğŸ“ License

This project is open source and available under the **MIT License**.

```
MIT License

Copyright (c) 2024 BookVerse

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
```

---

## ğŸ‰ Quick Start Checklist

Use this checklist to get up and running:

- [ ] Node.js 18+ installed
- [ ] Repository cloned
- [ ] Dependencies installed (`npm install --legacy-peer-deps`)
- [ ] Supabase account created
- [ ] `.env` file configured with Supabase credentials
- [ ] Database migrations applied
- [ ] All tables verified in Supabase Table Editor
- [ ] Development server started (`npm run dev`)
- [ ] Application accessible at http://localhost:8080
- [ ] Account created and logged in
- [ ] First book added to test functionality

---

## ğŸ’¡ Pro Tips

### For Users
- ğŸ” Use the **Chat** feature to quickly find books by asking "Show me fantasy books"
- ğŸ’¬ Join **Communities** to connect with readers who share your interests
- â­ Add books to **Favorites** to build your reading list
- ğŸ”” Enable **Notifications** to stay updated on community activity
- ğŸ›’ Check the **Marketplace** regularly for great book deals

### For Developers
- ğŸ› Use browser DevTools â†’ Network tab to debug API calls
- ğŸ“Š Check Supabase â†’ Logs for database errors
- ğŸ¨ Use Tailwind's `dark:` prefix for dark mode styles
- âš¡ Leverage React Query for automatic caching and refetching
- ğŸ” Always test with RLS enabled in production

---

## ğŸ†˜ Getting Help

If you encounter issues:

1. **Check this README** - Most common issues are covered
2. **Review Additional Documentation** - See files in root directory
3. **Check Supabase Dashboard**
   - Logs for error messages
   - Table Editor for data structure
   - API docs for reference
4. **Browser Console** - Check for JavaScript errors
5. **Network Tab** - Inspect failed requests

### Support Channels

- ğŸ“§ Create an issue on GitHub
- ğŸ’¬ Check existing issues for solutions
- ğŸ“– Read Supabase documentation
- ğŸŒ Visit React and Vite docs

---

## ğŸ™ Acknowledgments

Built with amazing open-source tools:

- **React** - UI library
- **Supabase** - Backend platform
- **Tailwind CSS** - Styling
- **shadcn/ui** - Component library
- **Radix UI** - Accessible primitives
- **Lucide** - Beautiful icons
- **Framer Motion** - Animations
- And many more! See `package.json` for full list

---

## ğŸ“Š Project Stats

- **Lines of Code**: 10,000+
- **Components**: 50+
- **Database Tables**: 20+
- **Pages**: 14
- **Features**: 30+

---

## ğŸ”„ Changelog

### Version 0.1.0 (Current)
- âœ¨ Initial release
- ğŸ“š Complete book management
- ğŸ›’ Marketplace with all listing types
- ğŸ‘¥ Community features
- ğŸ¤– AI-powered chatbot
- ğŸ¨ Modern UI with dark mode
- ğŸ”” Real-time notifications

---

## ğŸš€ Roadmap

Future enhancements:

- [ ] Mobile app (React Native)
- [ ] Advanced AI with OpenAI integration
- [ ] Book recommendations algorithm
- [ ] Reading statistics dashboard
- [ ] Social media integration
- [ ] Email notifications
- [ ] Book barcode scanner
- [ ] Reading progress tracker
- [ ] Book clubs scheduling
- [x] Private messaging
- [x] Trust & Safety Reporting System

---

## ğŸ“ Contact

**Project Maintainer**: Your Name
**Email**: your.email@example.com
**GitHub**: [@tanish643](https://github.com/tanish643))

---

<div align="center">

**Built with â¤ï¸ using React, TypeScript, Supabase, and Tailwind CSS**

â­ **Star this repo if you find it helpful!** â­

[Report Bug](https://github.com/tanish643/bookverse/issues) Â· [Request Feature](https://github.com/tanish643/bookverse/issues)

</div>
